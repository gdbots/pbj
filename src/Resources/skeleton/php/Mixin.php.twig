<?php

namespace {{ schema.languages.php.namespace }};

{% block use_statements %}
use Gdbots\Pbj\AbstractMixin;
use Gdbots\Pbj\FieldBuilder as Fb;
use Gdbots\Pbj\SchemaId;
use Gdbots\Pbj\Type as T;
use Gdbots\Pbj\Enum\Format;
{% for field in schema.fields %}
{% if field.languageOption('php', 'class_name') %}
use {{ field.languageOption('php', 'class_name') }};
{% endif %}
{% endfor %}
{% endblock use_statements %}

{% block class_definition %}
class {{ schema.className }}V{{ schema.id.version.major }}Mixin extends AbstractMixin
{% endblock class_definition %}
{
{% block class_body %}
    /**
     * {@inheritdoc}
     */
    public function getId()
    {
        return SchemaId::fromString('{{ schema.id }}');
    }

    /**
     * {@inheritdoc}
     */
    public function getFields()
    {
        return [
          {% import 'php/macros.php.twig' as macros %}
          {%- for field in schema.fields %}
            {{- macros.draw_field(field) }}{%- if not loop.last %},{% endif %}

          {% endfor -%}
        ];
    }
{% endblock class_body %}
}
