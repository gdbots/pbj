<?php

namespace {{ schema.languages.php.namespace }};

{% block use_statements %}
use Gdbots\Pbj\AbstractMixin;
use Gdbots\Pbj\FieldBuilder as Fb;
use Gdbots\Pbj\SchemaId;
use Gdbots\Pbj\Type as T;
{% endblock use_statements %}

{% block class_definition %}
class {{ schema.className }}{{ prefix }} extends AbstractMixin
{% endblock class_definition %}
{
{% block class_body %}
    /**
     * {@inheritdoc}
     */
    public function getId()
    {
        return SchemaId::fromString('{{ schema.id }}');
    }

    /**
     * {@inheritdoc}
     */
    public function getFields()
    {
        return [
          {% import 'php/fields.php.twig' as fields %}
          {% for field in schema.fields %}
            {{ attribute(fields, class(field.type), [field]) }}{% if not loop.last %},{% endif %}
          {% endfor %}
        ];
    }
{% endblock class_body %}
}
