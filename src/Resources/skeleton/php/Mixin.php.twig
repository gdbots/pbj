<?php

namespace {{ schema.languageKey('php', 'namespace') }};

{% block use_statements %}
use Gdbots\Pbj\AbstractMixin;
use Gdbots\Pbj\FieldBuilder as Fb;
use Gdbots\Pbj\SchemaId;
use Gdbots\Pbj\Type as T;
{% set format_class = false %}
{% for field in schema.fields %}
{% if field.format %}
{% set format_class = true %}
{% endif %}
{% if field.languageKey('php', 'class_name') %}
use {{ field.languageKey('php', 'class_name') }};
{% endif %}
{% endfor %}
{% if format_class %}
use Gdbots\Pbj\Enum\Format;
{% endif %}
{% endblock use_statements %}

{% block class_definition %}
final class {{ getClassName(schema, true) }}Mixin extends AbstractMixin
{% endblock class_definition %}
{
{% block class_body %}
    /**
     * {@inheritdoc}
     */
    public function getId()
    {
        return SchemaId::fromString('{{ schema.id }}');
    }

    /**
     * {@inheritdoc}
     */
    public function getFields()
    {
        return [
{% import 'php/macros.php.twig' as macros %}
{% for field in schema.fields %}
          {{ macros.draw_field(field, loop.last) }}
{%- endfor %}
        ];
    }
{% endblock class_body %}
}
